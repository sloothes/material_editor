<!DOCTYPE html>
<html lang="en">
	
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<title>material editor (demo)</title>

		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootbox-dialoges.css">

		<script src="/js/jquery.min.js"></script>
		<script src="/js/bootstrap.min.js"></script>

	</head>

	<body>

		<script src="/threejs/108/build/three.js"></script>
		<script src="/threejs/108/examples/js/loaders/FBXLoader.js"></script>


		<div style="position:absolute;top:0;right:0;width:350px;height:100%;border:1px solid;padding:25px;">

			<div id="import-model" class="form-control btn btn-primary btn-white-outline gradient-btn" style="width:100%;height:40px;font-size:large;">Import model</div>

		</div>

		<script>
			(function(){|

				var button = document.getElementById("import-model");

				button.addEventListener("click", function(){
					var input = document.createElement("input");
					input.type = "file";
					input.style.display = "none";
					input.setAttribute("accept", ".fbx,.dae,.obj");
				//	input.setAttribute("multiple", ""); // true
					input.addEventListener( "change", function(){

						var file = input.files[0];
						var filename = file.name;
						var extension = filename.split( "." ).pop().toLowerCase();

						var reader = new FileReader();
						reader.addEventListener( "progress", function ( event ) {
							var size = "(" + Math.floor( event.total / 1000 ).format() + " KB)";
							var progress = Math.floor( ( event.loaded / event.total ) * 100 ) + "%";
							console.log( "Loading", filename, size, progress );
						});

						switch ( extension ) {

							case "fbx":

								reader.addEventListener( "load", function ( event ) {

									var contents = event.target.result;

									var loader = new THREE.FBXLoader( manager );
									var object = loader.parse( contents );


								}, false );

								reader.readAsArrayBuffer( file );

							break;

							case "dae":

								reader.addEventListener( "load", function ( event ) {

									var contents = event.target.result;

									var loader = new THREE.ColladaLoader( manager );
									var collada = loader.parse( contents );

									collada.scene.name = filename;


								}, false );

								reader.readAsText( file );

							break;

							case "obj":

								reader.addEventListener( "load", function ( event ) {

									var contents = event.target.result;

									var object = new THREE.OBJLoader().parse( contents );
									object.name = filename;


								}, false );

								reader.readAsText( file );

							break;

						}

					});
					
					input.click();

				});
			})();
		</script>























	</body>
</html>
